---
import Social from "./Social.astro";
import LogoExtended from "../components/atoms/LogoExtended.astro";
import { getLangFromUrl } from "../i18n/utils";

interface uiData {
  nav: NavItem[];
  footer: {
    nav: NavItem[];
    additionalInfo: additionlInfo[];
    icons: IconItem[];
  };
}

interface NavItem {
  name: string;
  ariaLabel: string;
  url: string;
}

interface additionlInfo {
  name: string;
  ariaLabel: string;
  url: string;
}

interface IconItem {
  name: string;
  url: string;
  icon: string;
  alt: string;
}

const lang = getLangFromUrl(Astro.url);
const allData = import.meta.glob<uiData>("../data/*/uiData.json", {
  eager: true,
});
const matchedEntry = Object.entries(allData).find(([path]) =>
  path.includes(`/${lang}/`)
);
const uiData = matchedEntry?.[1];
---

<footer
  class="flex flex-col items-center gap-8 my-4 border-t border-[rgba(255,255,255,0.13)] pt-6 mx-4"
>
  <div class="w-full lg:px-10 flex flex-col gap-12 lg:gap-16 items-center justify-center">
    <div
      class="relative flex flex-col lg:flex-row gap-6 md:gap-16 lg:gap-30 items-center justify-center md:justify-between w-full mt-6"
    >
      <div class="lg:w-[20%]">
        <LogoExtended />
      </div>
      <div
        class="lg:absolute lg:left-1/2 transform lg:-translate-x-1/2 flex flex-col lg:flex-1 gap-8 md:gap-12"
      >
        <ul class="flex flex-col md:flex-row md:justify-between gap-4">
          {
            uiData?.nav.map((item, i) => (
              <a href={item.url} aria-label={item.ariaLabel}>
                <li class="text-semibold text-[#7B7E80] text-[18px] text-center leading-[150%]">
                  {item.name}
                </li>
              </a>
            ))
          }
        </ul>
        <ul class="flex flex-col md:flex-row md:justify-between gap-4 md:gap-12">
          {
            uiData?.footer.additionalInfo.map((item, i) => (
              <a href={item.url} aria-label={item.ariaLabel}>
                <li class="text-semibold text-[#7B7E80] text-[18px] text-center leading-[150%]">
                  {item.name}
                </li>
              </a>
            ))
          }
        </ul>
      </div>
      <div class="flex flex-col gap-6 items-center lg:w-[20%]">
        <p class="text-[#7B7E80] text-center text-base leading-[150%]">
          "You've reached the end. Ready to start your journey?"
        </p>
        <div class="flex items-center justify-center gap-12">
          {
            uiData?.footer.icons.map((item, i) => (
              <a href={item.url} aria-label={item.name} class="flex-shrink-0">
                <img src={item.icon} alt={item.alt} />
              </a>
            ))
          }
        </div>
      </div>
    </div>
    <p class="text-[#7B7E80] text-center text-base leading-[150%]">
      Â©2025 AcidusLabs.<br /> All Rights Reserved.
    </p>
  </div>
</footer>
