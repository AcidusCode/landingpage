---
import RightArrow from "../icons/RightArrow.astro";
import SectionTitle from "../molecules/SectionTitle.astro";

import { faqData } from "../../data/faqData.js";
---

<div class="flex flex-col gap-8 mt-12 mx-8">
  <SectionTitle
    title="Preguntas frecuentes"
    description="Todo lo que necesitas saber antes de comenzar"
  />
  <div class="flex flex-col gap-4">
    {
      faqData.map((faq, i) => (
        <div
          class="flex bg-[#222] rounded-xl py-2 px-4 items-start border-b border-[#222]"
          id={`faq-${i}`}
        >
          <button
            class="pr-2 transition-all duration-300"
            aria-label={`Abrir pregunta frecuente no ${i}`}
            data-toggle={`faq-${i}`}
          >
            <RightArrow />
          </button>
          <div class="flex flex-col gap-2">
            <h4 class="text-[#eee] font-semibold">{faq.question}</h4>
            <p class="hidden text-[#959595] pr-4 transition-all duration-300 text-md font-light">
              {faq.description}
            </p>
          </div>
        </div>
      ))
    }
  </div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("button[data-toggle]").forEach((button) => {
      button.addEventListener("click", () => {
        const id = button.getAttribute("data-toggle");
        const arrow = button.querySelector('svg');
        const faq = document.querySelector(`#${id} p`);
        if (faq) {
          arrow.classList.add("transition-all");
          arrow.classList.add("duration-300");
          arrow.classList.toggle("rotate-90");
          faq.classList.toggle("hidden");
        }
      });
    });
  });
</script>
